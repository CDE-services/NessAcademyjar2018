package mineweeper.core;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertNotSame;

import org.junit.Before;
import org.junit.BeforeClass;
import org.junit.Test;

import minesweeper.core.Clue;
import minesweeper.core.Field;
import minesweeper.core.GameState;

public class FieldTest {

	private static final int ROWS = 10;
	private static final int COLS = 11;
	private static final int MINES = 10;
	private Field field;
	
	@Before
	public void init() {
		field = new Field(ROWS, COLS, MINES);
		System.out.println(">>>> before");
	}
	
	@AfterClass
	public static void initClass() {
		System.out.println(">>> BEFORE CLASS");
	}

	@Test                
    public void isSolved() {
		System.out.println("TEST IS SOLVED");
     
        assertEquals(GameState.PLAYING, field.getState());
        
        int open = 0;
        for(int row = 0; row < field.getRowCount(); row++) {
            for(int column = 0; column < field.getColumnCount(); column++) {
                if(field.getTile(row, column) instanceof Clue) {
                    field.openTile(row, column);
                    open++;
                }
                if(field.getRowCount() * field.getColumnCount() - open == field.getMineCount()) {
                    assertEquals(GameState.SOLVED, field.getState());
                } else {
                    assertNotSame(GameState.FAILED, field.getState());
                }
            }
        }
        
        assertEquals(GameState.SOLVED, field.getState());
    } 
	
	@Test
	public void testTemp() {
		System.out.println("TEST TEMP");
	}
}
